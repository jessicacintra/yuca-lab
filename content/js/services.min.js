let inputService,pService,id,serviceItem=[],totalPrice="",firstName="",lastName="";const getServices=fetch("https://private-42e99d-yuca1.apiary-mock.com/services",{method:"GET"}).then(function(e){e.json().then(function(e){listServiceItem(e)})}).catch(function(e){console.error("Erro para retornar API de serviços",e)}),getUserServices=fetch("https://private-42e99d-yuca1.apiary-mock.com/me",{method:"GET"}).then(function(e){e.json().then(function(e){id=e.user.id,firstName=e.user.firstName,lastName=e.user.lastName,listServiceUserItem(e.services),listVariables()})}).catch(function(e){console.error("Erro para retornar API de serviços do usuário",e)});function updateUserServices(){let e=[],t=document.querySelectorAll(".input-service");t.forEach(function(r,c){t[c].checked&&e.push(t[c].id)});var r=new Object;r.userId=id,r.services=e;let c=JSON.stringify(r);return fetch("https://private-42e99d-yuca1.apiary-mock.com/services",{method:"PUT",body:c}).then(function(e){window.location.href="confirmation.html"}).catch(function(e){console.error("Erro para atualizar dados do usuário",e)})}function goToHome(){window.location.href="home.html"}listVariables=function(){const e=firstName[0]+lastName[0];document.querySelector("[data-short-name]").innerHTML=e;var t=document.querySelectorAll("[data-first-name]");t.forEach(function(e,r){t[r].innerHTML=firstName})},listServiceItem=function(e){e.forEach(function(t,r){let c=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e[r].price),i=document.querySelector(".box-services"),n=document.createElement("div"),o=document.createElement("label"),a=document.createElement("input"),s=document.createElement("span"),l=document.createElement("p");serviceItem=[e[r].id,e[r].name,c],a.type="checkbox",a.id=e[r].id,a.setAttribute("class","input-service"),s.textContent=e[r].name,l.textContent=c,l.setAttribute("class","price-service"),i.appendChild(n),n.appendChild(o),n.setAttribute("class","service-item"),n.setAttribute("onchange","calculateTotalPrice()"),n.appendChild(l),o.appendChild(a),o.appendChild(s)})},listServiceUserItem=function(e){let t=document.querySelectorAll(".input-service");e.forEach(function(r,c){t.forEach(function(r,i){e[c].id==t[i].id&&(t[i].checked=!0)})}),calculateTotalPrice()},calculateTotalPrice=function(){let e=document.querySelectorAll(".input-service"),t=document.querySelectorAll(".price-service"),r=document.querySelector("[data-total-price]"),c="",i=0;e.forEach(function(r,n){e[n].checked?(c=t[n].textContent.replace("R$",""),t[n].setAttribute("class","price-service active"),i+=parseInt(c)):t[n].setAttribute("class","price-service")}),r.textContent=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(i)};
